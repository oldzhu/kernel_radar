# f8850bc3986562f79619: fix options for taprio RCU stall

This note documents two alternative fixes for the TAPRIO (sch_taprio) timer catch-up storm described in the RCA.

## Option 1: Minimum interval for software mode

- Scope: software mode only (no full offload, no txtime-assist).
- Change: enforce a stricter minimum schedule interval at netlink parse time.
- Behavior: reject schedules with very small intervals (for example 255 ns).
- Rationale: sub-microsecond intervals are not realistically schedulable in software and can trigger hrtimer storms.

Patch: repro/f8850bc3986562f79619/patches/option1-min-interval.patch

## Option 2: Catch-up resync in advance_sched()

- Scope: runtime behavior for software timer scheduling.
- Change: if the timer fires late, resync the schedule to the entry corresponding to "now" and program the next future boundary.
- Behavior: avoids rearming the hrtimer into the past and prevents a tight loop in hardirq/softirq paths.
- Rationale: still allows smaller intervals, but caps the catch-up behavior so the CPU is not monopolized by timer re-fires.

Patch: repro/f8850bc3986562f79619/patches/option2-catch-up.patch

## Notes

- The two options are alternatives and can be evaluated independently.
- Option 1 is stricter input validation; Option 2 is a runtime catch-up safeguard.
